(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{379:function(n,v,_){"use strict";_.r(v);var e=_(42),t=Object(e.a)({},(function(){var n=this,v=n.$createElement,_=n._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[_("h1",{attrs:{id:"nginx相关"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#nginx相关"}},[n._v("#")]),n._v(" Nginx相关")]),n._v(" "),_("h2",{attrs:{id:"屏蔽ip"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#屏蔽ip"}},[n._v("#")]),n._v(" 屏蔽IP")]),n._v(" "),_("p",[n._v("1.根据下面命令查询IP访问次数\n"),_("code",[n._v("awk '{print $1}' access.log |sort |uniq -c |sort -n")])]),n._v(" "),_("p",[n._v("2.添加屏蔽IP文件"),_("code",[n._v("blockip.conf")])]),n._v(" "),_("p",[_("code",[n._v("deny 60.10.116.48")])]),n._v(" "),_("ul",[_("li",[n._v("屏蔽单个ip "),_("code",[n._v("deny IP;")])]),n._v(" "),_("li",[n._v("允许单个IP "),_("code",[n._v("allow IP;")])]),n._v(" "),_("li",[n._v("屏蔽所有ip访问"),_("code",[n._v("deny all;")])]),n._v(" "),_("li",[n._v("屏蔽IP段"),_("code",[n._v("deny 192.0.0.1/8")]),n._v(" "),_("ul",[_("li",[n._v("/8是192.xxx.xxx.xxx")]),n._v(" "),_("li",[n._v("/16是192.123.xxx.xxx")]),n._v(" "),_("li",[n._v("/24是 192.234.123.xxx")])])])]),n._v(" "),_("p",[n._v("3.nginx.conf配置文件中引入\n"),_("code",[n._v("include blockip.conf;")])]),n._v(" "),_("p",[n._v("4.重启nginx")]),n._v(" "),_("p",[_("code",[n._v("/usr/local/nginx/nginx -s reload")])]),n._v(" "),_("p",[_("code",[n._v("systemctl restart nginx")])])])}),[],!1,null,null,null);v.default=t.exports}}]);